# f7_udp
ROS 2-マイコン間をUDPで通信するパッケージです。  

## 概要 
4輪オムニ試作機向けに開発、キャチロボ2024でも採用、NHKロボコン2025でも使用予定です。    
もともとはNUCLEO-F767ZI向けに開発しましたが、Mbedのサービス終了によりRaspberry Pi Pico Wに移行を進めています。  
micro-ROSと比較して利用のハードルが低く、無線通信が可能です。     
ただしPC-ルーター、マイコン-ルーター間が無線になるため電波干渉の影響を受ける可能性があります。  
## 実行環境 
| OS | ROS | 
| ---- | ---- | 
| Ubuntu 24.04 LTS | Jazzy | 


## 使い方
準備中      


## IP割り当て状況（NHK2025）
動的IPに対応していますが、マイコンとのIP競合を防ぐために必ずIPを固定してください。
| IP | 機器 | 詳細 |
| ---- | ---- | ---- |
| 192.168.8.1 | ルーター | デフォルトゲートウェイ |
| 192.168.8.191 | PC | imori | 
| 192.168.8.193 | PC | ubuntu | 
| 192.168.8.195 | PC | dev | 
| 192.168.8.197 | 空き | / |  
| 192.168.8.199 | 空き | / |   
| 192.168.8.205 | ラズパイ4 | 赤 | 
| 192.168.8.219 | Pico W | MR足回り |
| 192.168.8.220 | Pico W | MR機構 |
| 192.168.8.221 | Pico W | DR足回り |
| 192.168.8.222 | Pico W | DR機構 |

## 配列要素について
準備中
<!--
マイコンに送信される配列'data'は9個の要素を持っています。各要素の詳細をここにまとめます。  
現状、MD以外の駆動には未使用の配列要素を転用しています。要素数は今後拡張予定です。
| data[n] | 詳細 |
| ---- | ---- |
| data[0] | 未使用、送信もされないので注意 |
| data[1] | MD1 |
| data[2] | MD2 |
| data[3] | MD3 |
| data[4] | MD4 |
| data[5] | MD5 |
| data[6] | MD6 |
| data[7] | MD7（旧メイン基板のみ使用可） |
| data[8] | MD8（旧メイン基板のみ使用可） |  


ROS 2ノードからマイコンに送信される配列'data'は17個の要素を持っています。各要素の詳細をここにまとめます。
| data[n] | 詳細 |
| ---- | ---- |
| data[0] | 未使用、送信もされないので注意 |
| data[1] | MD1 |
| data[2] | MD2 |
| data[3] | MD3 |
| data[4] | MD4 |
| data[5] | MD5 |
| data[6] | MD6 |
| data[7] | MD7（旧メイン基板のみ使用可） |
| data[8] | MD8（旧メイン基板のみ使用可） |
| data[9]| サーボ1 or 電磁弁1 |
| data[10]| サーボ2 or 電磁弁2 |
| data[11]| サーボ3 or 電磁弁3 |
| data[12]| サーボ4 or 電磁弁4 |
| data[13]| パイロットランプ1 |
| data[14]| パイロットランプ2 |
| data[15]| その他通信 |
| data[16]| その他通信 |
-->

## 命名規則
cr24_はキャチロボ2024、NR25_はNHKロボコン2025を表しています。新しいノードを作成する際はこれらの大会向けコードを参考にしてください。
archivedフォルダには過去のファイル類がまとめてあります。必要に応じて参照してください。

## 実績
キャチロボ2024 ２回生機体  
NHKロボコン2025　汎用機、ダンク機

## Powered by
2024年度立命館大学ロボット技術研究会NHKプロジェクト  
2024 NHK Project, RRST, Ritsumeikan University 

![Logo](https://www.rrst.jp/img/logo.png)
