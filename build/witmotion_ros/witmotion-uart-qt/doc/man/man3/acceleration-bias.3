.TH "acceleration-bias" 3 "Mon Feb 17 2025 17:07:52" "Version 1.2.28~dev_5c2e86d" "Witmotion IMU Library" \" -*- nroff -*-
.ad l
.nh
.SH NAME
acceleration-bias \- Acceleration bias calculation 
.PP

.SH "Disclaimer"
.PP
The algorithm explained here is determined during the tests\&. It can be different from the original undocumented algorithm used by Witmotion in their own sensor control tool\&.
.SH "Data layout"
.PP
In \fBwitmotion_config_packet\fP the \fCsetting\fP field uses inverse-byte data layout:
.IP "\(bu" 2
\fCsetting\&.raw[0]\fP is the \fBfine\fP tuning part of bias from 0\&.0 to -0\&.25, divided into 256 grades, \fCuint8_t\fP
.IP "\(bu" 2
\fCsetting\&.raw[1]\fP is the \fBrough\fP tuning part of bias, imposed as signed integer, 127 bidirectional grades, \fCint8_t\fP
.PP
.SH "Calculation"
.PP
The sensor built-in calibration coefficient is 4, so the original formula looks as the following:  \begin{eqnarray*}
    B &=& bias \\
    B_a^{rough} &=& trunc(4 \cdot B) \; \mbox{if} \left| B \right| < 127 \\
    \left| B_a^{rough} \right| &=& 127 \; \mbox{otherwise} \\
    B_a^{fine} &=& \frac{255}{0.25} \left( 0.25 - \left| bias \bmod 0.25 \right| \right) \mbox{if}\; bias < 0 \\
    &=& \frac{255}{0.25} \left| bias \bmod 0.25 \right| \; \mbox{otherwise}
\end{eqnarray*}
.PP
Then the fractional parts of $ B_a^{rough} $ and $  B_a^{fine} $ should be discarded and the values exposed as \fIsigned\fP integers into \fCsetting\&.raw\fP subfields\&. 
